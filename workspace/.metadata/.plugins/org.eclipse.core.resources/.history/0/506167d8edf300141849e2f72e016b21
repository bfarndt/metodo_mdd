grammar org.example.domainmodel.Extended with org.eclipse.xtext.common.Terminals

generate extended "http://www.example.org/domainmodel/Extended"

Domainmodel:
	'project' nomeProj = STRING
	
	'begin'
	
	(elements += AbstractElement)*

    'end'
;

PackageDeclaration:
	'package' name = QualifiedName '{'
		(elements += AbstractElement)*
	'}'
;

AbstractElement:
	PackageDeclaration | Type | Import | Page | Form
;

QualifiedName:
	ID ('.' ID)*
;

Import:
	'import' importedNamespace = QualifiedNameWithWildcard
;

QualifiedNameWithWildcard:
	QualifiedName '.*'?
;

Type:
	DataType | Entity
;

DataType:
	'datatype' name = ID
;

Entity:
	'entity' name = ID ('extends' superType = [Entity | QualifiedName])?
	'{'
		(features += Feature)*
	'}'
;

Feature:
	(many ?= 'many')? name = ID ':' type = [Type | QualifiedName]
;

Boolean:
	'true' | 'false'
;

Page:
	'page' name = ID
	'{'
		'title' ':' title = (STRING)?
		'header' ':' header = Boolean
		'footer' ':' footer = Boolean
		(forms += [FormTypes])*
	'}'
;

FormTypes:
	Form | FormNewEntityOnly | FormReport
;

Form:
	'form' name = ID
	'{'
		'get' ':' get = Boolean
		'post' ':' post = Boolean
		'put' ':' put = Boolean
		'delete' ':' delete = Boolean
		entity = [Entity]
	'}'
;

FormNewEntityOnly:
	'formNewEntity' name = ID
	'{'
		entity = [Entity]
	'}'
;

FormReport:
	'formReport' name = ID
	'{'
		'filter' ':' filter = Boolean
		'order' ':' order = Boolean
		'pagination' ':' pagination = Boolean
	'}'
;